{"version":3,"file":"UDABackground.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://UdanLibrary/./node_modules/detect-browser/es/index.js","webpack://UdanLibrary/./node_modules/process/browser.js","webpack://UdanLibrary/./src/BrowserConstants.ts","webpack://UdanLibrary/./src/config/CustomConfig.ts","webpack://UdanLibrary/./src/config/endpoints.ts","webpack://UdanLibrary/./src/config/index.ts","webpack://UdanLibrary/./src/models/AuthData.ts","webpack://UdanLibrary/./src/models/CSPData.ts","webpack://UdanLibrary/./src/models/UDASessionData.ts","webpack://UdanLibrary/./src/services/UDAStorageService.ts","webpack://UdanLibrary/./src/util/KeycloakStore.ts","webpack://UdanLibrary/./src/util/LoginWithBrowser.ts","webpack://UdanLibrary/./src/util/UDABindAccount.ts","webpack://UdanLibrary/./src/util/UDABindAuthenticatedAccount.ts","webpack://UdanLibrary/./src/util/UDADigestMessage.ts","webpack://UdanLibrary/./src/util/UDAGetSessionKey.ts","webpack://UdanLibrary/./src/util/UDASendSessionData.ts","webpack://UdanLibrary/./src/util/getTab.ts","webpack://UdanLibrary/./src/util/invokeApi.ts","webpack://UdanLibrary/webpack/bootstrap","webpack://UdanLibrary/webpack/runtime/define property getters","webpack://UdanLibrary/webpack/runtime/global","webpack://UdanLibrary/webpack/runtime/hasOwnProperty shorthand","webpack://UdanLibrary/webpack/runtime/make namespace object","webpack://UdanLibrary/./src/Background.ts"],"sourcesContent":["var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.type = 'browser';\n    }\n    return BrowserInfo;\n}());\nexport { BrowserInfo };\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.type = 'node';\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexport { NodeInfo };\nvar SearchBotDeviceInfo = /** @class */ (function () {\n    function SearchBotDeviceInfo(name, version, os, bot) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n        this.bot = bot;\n        this.type = 'bot-device';\n    }\n    return SearchBotDeviceInfo;\n}());\nexport { SearchBotDeviceInfo };\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.type = 'bot';\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexport { BotInfo };\nvar ReactNativeInfo = /** @class */ (function () {\n    function ReactNativeInfo() {\n        this.type = 'react-native';\n        this.name = 'react-native';\n        this.version = null;\n        this.os = null;\n    }\n    return ReactNativeInfo;\n}());\nexport { ReactNativeInfo };\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\\ Jeeves\\/Teoma|ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /EdgA?\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['pie', /^Microsoft Pocket Internet Explorer\\/(\\d+\\.\\d+)$/],\n    ['pie', /^Mozilla\\/\\d\\.\\d+\\s\\(compatible;\\s(?:MSP?IE|MSInternet Explorer) (\\d+\\.\\d+);.*Windows CE.*\\)$/],\n    ['netfront', /^Mozilla\\/\\d\\.\\d+.*NetFront\\/(\\d.\\d)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FB[AS]V\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['curl', /^curl\\/([0-9\\.]+)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Windows CE', /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n];\nexport function detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof document === 'undefined' &&\n        typeof navigator !== 'undefined' &&\n        navigator.product === 'ReactNative') {\n        return new ReactNativeInfo();\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nfunction matchUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    return (ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false));\n}\nexport function browserName(ua) {\n    var data = matchUserAgent(ua);\n    return data ? data[0] : null;\n}\nexport function parseUserAgent(ua) {\n    var matchedRule = matchUserAgent(ua);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)\n    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    var version = versionParts.join('.');\n    var os = detectOS(ua);\n    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);\n    if (searchBotMatch && searchBotMatch[1]) {\n        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);\n    }\n    return new BrowserInfo(name, version, os);\n}\nexport function detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.exec(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexport function getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import { CONFIG } from \"./config\";\nexport let UDABrowserPlugin = false;\nexport let UDASessionName = CONFIG.USER_AUTH_DATA_KEY;\nexport let activeTabId = -1;\nexport let enablePlugin = false;\nexport let browserVar;\nconst { detect } = require('detect-browser');\nconst browser = detect();\nswitch (browser && browser.name) {\n    case 'edge-chromium':\n    case 'edge':\n    case 'edge-ios':\n    case 'chrome':\n        enablePlugin = true;\n        browserVar = chrome;\n        break;\n    default:\n        browserVar = browser;\n        break;\n}\nexport const updateBrowserPlugin = (plugin) => {\n    UDABrowserPlugin = plugin;\n};\nexport const updateSessionName = (sessionName) => {\n    UDASessionName = UDASessionName + \"-\" + sessionName;\n};\nexport const updateActiveTabId = (tabId) => {\n    activeTabId = tabId;\n};\n","/**\n * Author: Yureswar Ravuri\n * Type: MAP\n * Objective: Config Objects\n */\n// assigning default values to the default configuration\nexport const CustomConfig = {\n    enableEditClickedName: true,\n    enableSkipDuringPlay: true,\n    enableTooltipAddition: true,\n    enableMultilingual: true,\n    enableNodeTypeSelection: true,\n    enablePermissions: true,\n    permissions: { 'user': true, 'admin': true },\n    enableProfanity: false,\n    enableRecording: true,\n    enableOverlay: true,\n    environment: 'PROD',\n    enableUdaIcon: true,\n    udaDivId: 'uda-nistapp-logo',\n    enableForAllDomains: false,\n    enableSpeechToText: true,\n    enableSlowReplay: true,\n    enableCustomIcon: false,\n    customIcon: 'https://udan.nistapp.com/uda-logo.jpg',\n    realm: process.env.keycloakRealm,\n    clientId: process.env.keycloakClientId,\n    clientSecret: process.env.keycloakClientSecret,\n    enableHidePanelAfterCompletion: true,\n    enableStatusSelection: true,\n    enableUDAIconDuringRecording: true,\n    enableEditingOfRecordings: true // Flag to enable editing of recordings\n};\n","/**\n * Author: Lakshman Veti\n * Type: MAP\n * Objective: HTTP Endpoints\n */\nexport const ENDPOINT = {\n    CheckUserId: `/user/checkauthid`,\n    GetSessionKey: `/user/getsessionkey`,\n    CheckUserSession: `/user/checkusersession`,\n    Search: `/search/all?query=#keyword#&domain=#domain#&page=#page#&userSessionId=#userSessionId#`,\n    SearchWithPermissionsOld: `/clickevents/sequence/search?query=#keyword#&domain=#domain#&page=#page#&additionalParams=#additionalParams#`,\n    SearchWithPermissions: `/search/withPermissions?query=#keyword#&domain=#domain#&page=#page#&additionalParams=#additionalParams#&userSessionId=#userSessionId#`,\n    ProfanityCheck: `https://nistapp-content-moderator.cognitiveservices.azure.com/contentmoderator/moderate/v1.0/ProcessText/Screen`,\n    SpecialNodes: `/clickevents`,\n    Record: `/clickevents/clickednode`,\n    UpdateRecord: `/clickevents/updateclickednode`,\n    RecordSequence: `/clickevents/recordsequencedata`,\n    // updateRecordSequence: `/clickevents/updatesequencedata`,\n    updateRecordSequence: `/sequence/update`,\n    updateSequenceIndex: `/sequence/reindex/`,\n    UserClick: `/clickevents/userclick`,\n    DeleteSequence: `/clickevents/sequence/delete`,\n    fetchRecord: '/search',\n    VoteRecord: `/votes/addVote`,\n    fetchVoteRecord: `/votes/`,\n    tokenUrl: 'user/token',\n    statuses: '/status/category/#category#'\n};\n","/**\n * Author: Lakshman Veti\n * Type: MAP\n * Objective: Config Objects\n */\nexport const CONFIG = {\n    current: \"TEST\",\n    UDADebug: false,\n    UDA_CONTAINER_CLASS: \"udan-main-panel\",\n    UDA_CLICK_IGNORE_CLASS: \"uda_exclude\",\n    UDA_DOMAIN: process.env.baseURL,\n    UDA_API_URL: process.env.baseURL + \"/api\",\n    UDASessionID: (Math.random().toString(36).substring(2, 15) +\n        Math.random().toString(36).substring(2, 15)),\n    UDA_POST_INTERVAL: 1000,\n    UDALastMutationTime: 0,\n    UDALogLevel: 0,\n    RECORDING_IS_PLAYING: \"UDAIsPlaying\",\n    RECORDING_MANUAL_PLAY: \"UDAManualPlay\",\n    RECORDING_SWITCH_KEY: \"UDARecordingSwitch\",\n    RECORDING_SEQUENCE: \"UDAActiveRecordingData\",\n    SELECTED_RECORDING: \"UDASelectedRecordedItem\",\n    USER_AUTH_DATA_KEY: \"udaUserData\",\n    UserScreenAcceptance: \"udaUserScreenAcceptance\",\n    USER_SESSION_KEY: \"UDASessionKey\",\n    UDAKeyCloakKey: \"UDAKeyCloak\",\n    USER_SESSION_ID: \"UDASessionId\",\n    SYNC_INTERVAL: 1000,\n    AUTO_PLAY_SLEEP_TIME: 2000,\n    JARO_WEIGHT: 0.95,\n    JARO_WEIGHT_PERSONAL: 0.90,\n    lastClickedTime: null,\n    specialNodeKey: \"UDASpecialNodes\",\n    enableInfiniteScroll: true,\n    enableInfiniteScrollPageLength: 10,\n    UDA_URL_Param: 'UDA_Sequence_id',\n    set Environment(value) {\n        this.current = value.toString().toUpperCase();\n        if (this.current === \"PROD\") {\n            this.UDA_DOMAIN = \"https://udan.nistapp.ai\";\n        }\n        else {\n            this.UDA_DOMAIN = \"https://udantest.nistapp.ai\";\n        }\n        this.UDA_API_URL = this.UDA_DOMAIN + \"/api\";\n    },\n    get Environment() {\n        return this.current;\n    },\n    DEBOUNCE_INTERVAL: 1000,\n    indexInterval: 1000,\n    clickObjects: [],\n    nodeId: 0,\n    isRecording: false,\n    htmlIndex: [],\n    invokeTime: 2000,\n    apiInvokeTime: 300,\n    maxStringLength: 40,\n    playNextAction: true,\n    navigatedToNextPage: { check: false, url: '' },\n    ignoreElements: [\"script\", \"h1\", \"h2\", \"h3\", \"link\", \"noscript\", \"style\"],\n    ignoreAttributes: [\n        'translate', 'draggable', 'spellcheck', 'tabindex', 'clientHeight', 'clientLeft', 'clientTop', 'clientWidth',\n        'offsetHeight', 'offsetLeft', 'offsetTop', 'offsetWidth', 'scrollHeight', 'scrollLeft', 'scrollTop', 'scrollWidth',\n        'baseURI', 'isConnected', 'ariaPressed', 'aria-pressed', 'nodePosition', 'outerHTML', 'innerHTML', 'style',\n        'aria-controls', 'aria-activedescendant', 'ariaExpanded', 'autocomplete', 'aria-expanded', 'aria-owns', 'formAction',\n        'ng-star-inserted', 'ng-star', 'aria-describedby', 'width', 'height', 'x', 'y', 'selectionStart', 'selectionEnd', 'required', 'validationMessage', 'selectionDirection',\n        'naturalWidth', 'naturalHeight', 'complete', '_indexOf', 'value', 'defaultValue', 'min', 'max', 'nodeInfo', 'data-tooltip-id', 'addedclickrecord', 'checked', 'data-tribute',\n        'hasclick', 'addedClickRecord', 'hasClick', 'valueAsNumber', 'udaIgnoreChildren', 'udaIgnoreClick', 'udaignorechildren', 'udaignoreclick', 'fdprocessedid', '__ngContext__', 'd', 'text', 'textContent', 'cdk-describedby-host', 'inert', 'fill', 'disabled', 'hidden'\n    ],\n    innerTextWeight: 5,\n    ignoreNodesFromIndexing: ['ng-dropdown-panel', 'ckeditor', 'fusioncharts', 'ngb-datepicker', 'ngx-daterangepicker-material', 'uda-panel', 'mat-datepicker-content', 'ng-select'],\n    ignoreNodesContainingClassNames: ['cke_dialog_container', 'cke_notifications_area', 'gldp-default', 'ajs-layer', 'aui-list', 'herknl', 'jstBlock'],\n    cancelRecordingDuringRecordingNodes: [],\n    addClickToSpecialNodes: ['ng-select', 'ngb-datepicker'],\n    ignoreClicksOnSpecialNodes: ['ngx-daterangepicker-material'],\n    customNameForSpecialNodes: {\n        'ngb-datepicker': 'Date selector',\n        'mat-datepicker-content': 'Date selector',\n        'ngx-daterangepicker-material': 'Date Range Selector'\n    },\n    specialInputClickClassNames: ['ghx-dropdown-trigger', 'aui-list', 'jstBlock', 'mat-form-field-flex', 'mat-select-trigger'],\n    commonTags: ['span', 'div'],\n    tooltipDisplayedNodes: [],\n    // replay variables\n    autoplayCompleted: false,\n    autoplayPaused: false,\n    // manual click variables\n    invokedActionManually: false,\n    // personal node ignore attributes\n    personalNodeIgnoreAttributes: [\n        \"innerText\",\n        \"innerHTML\",\n        \"outerText\",\n        \"outerHTML\",\n        \"nodeValue\",\n        \"src\",\n        \"naturalWidth\",\n        \"naturalHeight\",\n        \"currentSrc\",\n    ],\n    //Azure content moderator attributes\n    profanity: {\n        enabled: true,\n        provider: \"azure\",\n        config: {\n            key1: process.env.profanityKey,\n            key2: process.env.profanityKey,\n            endPoint: process.env.profanityUrl,\n            region: process.env.profanityRegion,\n        },\n    },\n    multilingual: {\n        enabled: false,\n        searchInLang: \"en-US\",\n        selectedLang: \"en-US\",\n        displayText: \"\",\n        translatedText: \"\",\n        translate: {\n            provider: \"google\",\n            apikey: process.env.googleTranslateApiKey,\n            translateTo: \"en\",\n            apiurl: process.env.googleTranslateUrl,\n        },\n    },\n    // BCP list of languages\n    bcpLang: [\n        [\"Afrikaans\", [\"af-ZA\"]],\n        [\"አማርኛ\", [\"am-ET\"]],\n        [\"Azərbaycanca\", [\"az-AZ\"]],\n        [\"বাংলা\", [\"bn-BD\", \"বাংলাদেশ\"], [\"bn-IN\", \"ভারত\"]],\n        [\"Bahasa Indonesia\", [\"id-ID\"]],\n        [\"Bahasa Melayu\", [\"ms-MY\"]],\n        [\"Català\", [\"ca-ES\"]],\n        [\"Čeština\", [\"cs-CZ\"]],\n        [\"Dansk\", [\"da-DK\"]],\n        [\"Deutsch\", [\"de-DE\"]],\n        [\n            \"English\",\n            [\"en-AU\", \"Australia\"],\n            [\"en-CA\", \"Canada\"],\n            [\"en-IN\", \"India\"],\n            [\"en-KE\", \"Kenya\"],\n            [\"en-TZ\", \"Tanzania\"],\n            [\"en-GH\", \"Ghana\"],\n            [\"en-NZ\", \"New Zealand\"],\n            [\"en-NG\", \"Nigeria\"],\n            [\"en-ZA\", \"South Africa\"],\n            [\"en-PH\", \"Philippines\"],\n            [\"en-GB\", \"United Kingdom\"],\n            [\"en-US\", \"United States\"],\n        ],\n        [\n            \"Español\",\n            [\"es-AR\", \"Argentina\"],\n            [\"es-BO\", \"Bolivia\"],\n            [\"es-CL\", \"Chile\"],\n            [\"es-CO\", \"Colombia\"],\n            [\"es-CR\", \"Costa Rica\"],\n            [\"es-EC\", \"Ecuador\"],\n            [\"es-SV\", \"El Salvador\"],\n            [\"es-ES\", \"España\"],\n            [\"es-US\", \"Estados Unidos\"],\n            [\"es-GT\", \"Guatemala\"],\n            [\"es-HN\", \"Honduras\"],\n            [\"es-MX\", \"México\"],\n            [\"es-NI\", \"Nicaragua\"],\n            [\"es-PA\", \"Panamá\"],\n            [\"es-PY\", \"Paraguay\"],\n            [\"es-PE\", \"Perú\"],\n            [\"es-PR\", \"Puerto Rico\"],\n            [\"es-DO\", \"República Dominicana\"],\n            [\"es-UY\", \"Uruguay\"],\n            [\"es-VE\", \"Venezuela\"],\n        ],\n        [\"Euskara\", [\"eu-ES\"]],\n        [\"Filipino\", [\"fil-PH\"]],\n        [\"Français\", [\"fr-FR\"]],\n        [\"Basa Jawa\", [\"jv-ID\"]],\n        [\"Galego\", [\"gl-ES\"]],\n        [\"ગુજરાતી\", [\"gu-IN\"]],\n        [\"Hrvatski\", [\"hr-HR\"]],\n        [\"IsiZulu\", [\"zu-ZA\"]],\n        [\"Íslenska\", [\"is-IS\"]],\n        [\"Italiano\", [\"it-IT\", \"Italia\"], [\"it-CH\", \"Svizzera\"]],\n        [\"ಕನ್ನಡ\", [\"kn-IN\"]],\n        [\"ភាសាខ្មែរ\", [\"km-KH\"]],\n        [\"Latviešu\", [\"lv-LV\"]],\n        [\"Lietuvių\", [\"lt-LT\"]],\n        [\"മലയാളം\", [\"ml-IN\"]],\n        [\"मराठी\", [\"mr-IN\"]],\n        [\"Magyar\", [\"hu-HU\"]],\n        [\"ລາວ\", [\"lo-LA\"]],\n        [\"Nederlands\", [\"nl-NL\"]],\n        [\"नेपाली भाषा\", [\"ne-NP\"]],\n        [\"Norsk bokmål\", [\"nb-NO\"]],\n        [\"Polski\", [\"pl-PL\"]],\n        [\"Português\", [\"pt-BR\", \"Brasil\"], [\"pt-PT\", \"Portugal\"]],\n        [\"Română\", [\"ro-RO\"]],\n        [\"සිංහල\", [\"si-LK\"]],\n        [\"Slovenščina\", [\"sl-SI\"]],\n        [\"Basa Sunda\", [\"su-ID\"]],\n        [\"Slovenčina\", [\"sk-SK\"]],\n        [\"Suomi\", [\"fi-FI\"]],\n        [\"Svenska\", [\"sv-SE\"]],\n        [\"Kiswahili\", [\"sw-TZ\", \"Tanzania\"], [\"sw-KE\", \"Kenya\"]],\n        [\"ქართული\", [\"ka-GE\"]],\n        [\"Հայերեն\", [\"hy-AM\"]],\n        [\n            \"தமிழ்\",\n            [\"ta-IN\", \"இந்தியா\"],\n            [\"ta-SG\", \"சிங்கப்பூர்\"],\n            [\"ta-LK\", \"இலங்கை\"],\n            [\"ta-MY\", \"மலேசியா\"],\n        ],\n        [\"తెలుగు\", [\"te-IN\"]],\n        [\"Tiếng Việt\", [\"vi-VN\"]],\n        [\"Türkçe\", [\"tr-TR\"]],\n        [\"اُردُو\", [\"ur-PK\", \"پاکستان\"], [\"ur-IN\", \"بھارت\"]],\n        [\"Ελληνικά\", [\"el-GR\"]],\n        [\"български\", [\"bg-BG\"]],\n        [\"Pусский\", [\"ru-RU\"]],\n        [\"Српски\", [\"sr-RS\"]],\n        [\"Українська\", [\"uk-UA\"]],\n        [\"한국어\", [\"ko-KR\"]],\n        [\n            \"中文\",\n            [\"cmn-Hans-CN\", \"普通话 (中国大陆)\"],\n            [\"cmn-Hans-HK\", \"普通话 (香港)\"],\n            [\"cmn-Hant-TW\", \"中文 (台灣)\"],\n            [\"yue-Hant-HK\", \"粵語 (香港)\"],\n        ],\n        [\"日本語\", [\"ja-JP\"]],\n        [\"हिन्दी\", [\"hi-IN\"]],\n        [\"ภาษาไทย\", [\"th-TH\"]],\n    ],\n    // Flag to enable node type detection\n    enableNodeTypeChangeSelection: true,\n    set enableNodeTypeSelection(val) {\n        this.enableNodeTypeChangeSelection = val;\n        // this.showhtml();\n    },\n    get enableNodeTypeSelection() {\n        return CONFIG.multilingual.enabled;\n    },\n    cspUserAcceptance: {\n        storageName: \"uda-csp-enabled\",\n        data: { proceed: true },\n    },\n    screenAcceptance: {\n        storageName: \"uda-user-screen-consent\",\n        data: { proceed: true },\n    },\n    ignoreDynamicAttributeText: ['_ng', '__context', '__zone_symbol']\n};\n","export class AuthData {\n    constructor(id = null, email = null, token = null) {\n        this.id = id;\n        this.email = email;\n        this.token = token;\n    }\n}\n","export class CSPData {\n    constructor(cspEnabled = false, udaAllowed = true, domain = null) {\n        this.cspEnabled = cspEnabled;\n        this.udaAllowed = udaAllowed;\n        this.domain = domain;\n    }\n}\n","import { AuthData } from \"./AuthData\";\nimport { CSPData } from \"./CSPData\";\nexport class UDASessionData {\n    constructor(sessionKey = null, authenticated = false, authenticationSource = null, authData = new AuthData(), csp = new CSPData()) {\n        this.sessionKey = sessionKey;\n        this.authenticated = authenticated;\n        this.authenticationSource = authenticationSource;\n        this.authData = authData;\n        this.csp = csp;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n//storing the data to local storage\nimport { browserVar, UDABrowserPlugin } from \"../BrowserConstants\";\nexport const UDAStorageService = {\n    /**\n     * Adds data to the storage.\n     * @param {any} data - The data to be added.\n     * @param {string} key - The key to store the data under.\n     * @returns {Promise<void>} - A Promise that resolves when the data is added to the storage.\n     */\n    add: (data, key) => __awaiter(void 0, void 0, void 0, function* () {\n        if (UDABrowserPlugin === true) {\n            let storageData = {};\n            storageData[key] = data;\n            return yield browserVar.storage.local.set(storageData);\n        }\n        else {\n            const storageData = JSON.stringify(data);\n            return window.localStorage.setItem(key, storageData);\n        }\n    }),\n    /**\n     * Retrieves data from the storage.\n     *\n     * @param {string} key - The key associated with the data to be retrieved.\n     * @returns {Promise<any>} - A Promise that resolves with the retrieved data.\n     */\n    get: (key) => __awaiter(void 0, void 0, void 0, function* () {\n        if (UDABrowserPlugin === true) {\n            let result = yield browserVar.storage.local.get([key]);\n            return result[key];\n        }\n        else {\n            return window.localStorage.getItem(key);\n        }\n    }),\n    /**\n     * Removes data from the storage.\n     *\n     * @param {string} key - The key associated with the data to be removed.\n     * @returns {Promise<void>} - A Promise that resolves when the data is successfully removed from the storage.\n     */\n    remove: (key) => __awaiter(void 0, void 0, void 0, function* () {\n        if (UDABrowserPlugin === true) {\n            return yield browserVar.storage.local.remove([key]);\n        }\n        else {\n            return window.localStorage.removeItem(key);\n        }\n    })\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { UDAGetSessionKey } from \"./UDAGetSessionKey\";\nimport { UDABindAuthenticatedAccount } from \"./UDABindAuthenticatedAccount\";\n/**\n * Store keycloak data in chrome extension storage for retrival for other sites\n */\nexport const keyCloakStore = (sessionData, data) => __awaiter(void 0, void 0, void 0, function* () {\n    sessionData = yield UDAGetSessionKey(sessionData);\n    sessionData.authData = data;\n    sessionData.authenticated = true;\n    sessionData.authenticationSource = 'keycloak';\n    yield UDABindAuthenticatedAccount(sessionData);\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { UDADigestMessage } from \"./UDADigestMessage\";\nimport { UDABindAuthenticatedAccount } from \"./UDABindAuthenticatedAccount\";\nimport { UDASendSessionData } from \"./UDASendSessionData\";\nimport { browserVar } from \"../BrowserConstants\";\n/**\n * Asynchronously logs the user in using a browser.\n *\n * @param {UDASessionData} sessionData - The session data object to be updated with the user's authentication information.\n * @param {boolean} renewToken - Whether to renew the user's authentication token.\n * @return {Promise<boolean>} A promise that resolves to true if the login was successful, otherwise false.\n */\nexport const LoginWithBrowser = (sessionData, renewToken) => __awaiter(void 0, void 0, void 0, function* () {\n    sessionData.authenticationSource = \"google\";\n    const data = yield browserVar.identity.getProfileUserInfo({ accountStatus: 'ANY' });\n    if (data && (data === null || data === void 0 ? void 0 : data.id) !== '' && (data === null || data === void 0 ? void 0 : data.email) !== \"\") {\n        sessionData.authenticated = true;\n        sessionData.authData = data;\n        UDADigestMessage(data.id, \"SHA-512\").then((encryptedId) => __awaiter(void 0, void 0, void 0, function* () {\n            sessionData.authData.id = encryptedId;\n            UDADigestMessage(data.email, \"SHA-512\").then((encryptedEmail) => __awaiter(void 0, void 0, void 0, function* () {\n                sessionData.authData.email = encryptedEmail;\n                yield UDABindAuthenticatedAccount(sessionData, renewToken);\n            }));\n        }));\n    }\n    else {\n        yield UDASendSessionData(sessionData, \"UDAAlertMessageData\", \"login\");\n    }\n    return true;\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n//adding the sessionKey to the authid\nimport { UDASendSessionData } from \"./UDASendSessionData\";\nimport { invokeApi } from \"./invokeApi\";\nimport { ENDPOINT } from \"../config/endpoints\";\nimport { CustomConfig } from \"../config/CustomConfig\";\nimport { UDAStorageService } from \"../services/UDAStorageService\";\nimport { UDASessionName } from \"../BrowserConstants\";\nglobal.UDAGlobalConfig = CustomConfig;\n/**\n * Binds the user account with UDASessionData.\n * @param {Object} userAuthData - User authentication data.\n * @param {Object} UDASessionData - UDA session data.\n * @param {boolean} renewToken - Flag indicating whether to renew the token.\n * @returns {Promise<void>} Promise that resolves when the binding is complete.\n */\nexport const UDABindAccount = (userAuthData, UDASessionData, renewToken) => __awaiter(void 0, void 0, void 0, function* () {\n    const payLoad = { uid: UDASessionData.authData.id, email: UDASessionData.authData.email, realm: global.UDAGlobalConfig.realm, clientId: global.UDAGlobalConfig.clientId, clientSecret: global.UDAGlobalConfig.clientSecret };\n    const authToken = yield invokeApi(process.env.tokenUrl + ENDPOINT.tokenUrl, \"POST\", payLoad);\n    if (authToken && (authToken === null || authToken === void 0 ? void 0 : authToken.token)) {\n        UDASessionData.authData.token = authToken.token;\n        let userSessionData = { userauthid: userAuthData.id, usersessionid: UDASessionData.sessionKey };\n        let response = yield invokeApi(ENDPOINT.CheckUserSession, \"POST\", userSessionData);\n        if (response) {\n            yield UDAStorageService.add(UDASessionData, UDASessionName);\n            yield UDASendSessionData(UDASessionData, \"UDAAuthenticatedUserSessionData\");\n        }\n    }\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n//binding session key to the authenticated account\nimport { UDABindAccount } from \"./UDABindAccount\";\nimport { invokeApi } from \"./invokeApi\";\nimport { ENDPOINT } from \"../config/endpoints\";\n/**\n * Binds the authenticated account with UDASessionData.\n * @param {any} sessionData - The UDA session data.\n * @param {boolean} [renewToken=false] - Flag indicating whether to renew the token.\n * @returns {Promise<void>} A Promise that resolves when the binding is complete.\n */\nexport const UDABindAuthenticatedAccount = (sessionData, renewToken = false) => __awaiter(void 0, void 0, void 0, function* () {\n    let authData = {\n        authid: sessionData.authData.id,\n        emailid: sessionData.authData.email,\n        authsource: sessionData.authenticationSource\n    };\n    let response = yield invokeApi(ENDPOINT.CheckUserId, \"POST\", authData);\n    if (response) {\n        if (sessionData.sessionKey !== null) {\n            yield UDABindAccount(response, sessionData, renewToken);\n        }\n    }\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/**\n *\n * @param textMessage\n * @param algorithm\n * @returns {Promise<ArrayBuffer>}\n * @constructor\n *\n * This is used for encrypting text messages as specified in the docs\n * https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest\n *\n */\nexport const UDADigestMessage = (textMessage, algorithm) => __awaiter(void 0, void 0, void 0, function* () {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(textMessage);\n    const hash = yield crypto.subtle.digest(algorithm, data);\n    const hashArray = Array.from(new Uint8Array(hash)); // convert buffer to byte array\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // convert bytes to hex string\n    return hashHex;\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n//getting session key from backend server\nimport { invokeApi } from \"./invokeApi\";\nimport { ENDPOINT } from \"../config/endpoints\";\nexport const UDAGetSessionKey = (UDASessionData) => __awaiter(void 0, void 0, void 0, function* () {\n    let response = yield invokeApi(ENDPOINT.GetSessionKey, \"GET\", null, false);\n    if (!response) {\n        return response;\n    }\n    UDASessionData.sessionKey = response;\n    return UDASessionData;\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getTab } from \"./getTab\";\nimport { browserVar, UDABrowserPlugin } from \"../BrowserConstants\";\nimport { UDABindAuthenticatedAccount } from \"./UDABindAuthenticatedAccount\";\nexport const UDASendSessionData = (udaSessionData, sendAction = \"UDAUserSessionData\", message = '') => __awaiter(void 0, void 0, void 0, function* () {\n    if (UDABrowserPlugin === true) {\n        yield UDASendSessionDataToBackground(udaSessionData, sendAction, message);\n    }\n    else {\n        let sessionEvent = {};\n        switch (sendAction) {\n            case \"UDAUserSessionData\":\n                sessionEvent = new CustomEvent(\"UDAUserSessionData\", {\n                    detail: { data: JSON.stringify(udaSessionData) },\n                    bubbles: false,\n                    cancelable: false\n                });\n                break;\n            case \"UDAAuthenticatedUserSessionData\":\n                sessionEvent = new CustomEvent(\"UDAAuthenticatedUserSessionData\", {\n                    detail: { data: JSON.stringify(udaSessionData) },\n                    bubbles: false,\n                    cancelable: false\n                });\n                break;\n            case \"UDAAlertMessageData\":\n                sessionEvent = new CustomEvent(\"UDAAlertMessageData\", {\n                    detail: { data: message },\n                    bubbles: false,\n                    cancelable: false\n                });\n                break;\n        }\n        document.dispatchEvent(sessionEvent);\n    }\n});\nexport const UDASendSessionDataToBackground = (udaSessionData, sendAction = \"UDAUserSessionData\", message = '') => __awaiter(void 0, void 0, void 0, function* () {\n    let tab = yield getTab();\n    if (!tab) {\n        console.log('No active tab identified.');\n        return false;\n    }\n    if (sendAction === \"UDAAlertMessageData\") {\n        yield browserVar.tabs.sendMessage(tab.id, { action: sendAction, data: message });\n        return true;\n    }\n    else {\n        // Logic to add the authtoken to the session data\n        if (!udaSessionData.authData.hasOwnProperty('token')) {\n            yield UDABindAuthenticatedAccount(udaSessionData, false);\n        }\n        else {\n            yield browserVar.tabs.sendMessage(tab.id, { action: sendAction, data: JSON.stringify(udaSessionData) });\n        }\n        return true;\n    }\n});\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { activeTabId, browserVar } from \"../BrowserConstants\";\n/**\n * Retrieves the active tab from the browser.\n *\n * @return {Promise<Object>} The active tab object.\n */\nexport const getTab = () => __awaiter(void 0, void 0, void 0, function* () {\n    let queryOptions = { active: true, currentWindow: true };\n    let tab = (yield browserVar.tabs.query(queryOptions))[0];\n    if (tab) {\n        return tab;\n    }\n    else if (activeTabId !== -1) {\n        tab = yield browserVar.tabs.get(activeTabId);\n        if (tab) {\n            return tab;\n        }\n        else {\n            console.log('No active tab identified.');\n            return false;\n        }\n    }\n    else {\n        return false;\n    }\n});\n","/**\n * Common API call functionality\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CustomConfig } from \"../config/CustomConfig\";\nglobal.UDAGlobalConfig = CustomConfig;\nexport const invokeApi = (url, method, data, parseJson = true) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const config = {\n            method: method,\n            headers: {\n                'Content-Type': 'application/json',\n                'charset': 'UTF-8'\n            }\n        };\n        if (data) {\n            config.body = JSON.stringify(data);\n        }\n        const baseProdURL = process.env.baseProdURL;\n        const baseTestURL = process.env.baseTestURL;\n        let baseURL = baseProdURL;\n        if (url.indexOf(\"http\") === -1) {\n            if (global.UDAGlobalConfig.environment === 'TEST') {\n                baseURL = baseTestURL;\n            }\n            url = baseURL + url;\n        }\n        let response = yield fetch(url, config);\n        if (response.ok) {\n            if (parseJson) {\n                return response.json();\n            }\n            else {\n                return response.text();\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    catch (e) {\n        console.log(e);\n        return false;\n    }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { browserVar, UDASessionName, updateActiveTabId, updateBrowserPlugin } from \"./BrowserConstants\";\nupdateBrowserPlugin(true);\n/**\n * Storing the active tab id to fetch for further data.\n */\nbrowserVar.tabs.onActivated.addListener(function (activeInfo) {\n    updateActiveTabId(activeInfo.tabId);\n});\nimport { LoginWithBrowser } from \"./util/LoginWithBrowser\";\nimport { UDASendSessionData } from \"./util/UDASendSessionData\";\nimport { UDASessionData } from \"./models/UDASessionData\";\nimport { UDAGetSessionKey } from \"./util/UDAGetSessionKey\";\nimport { UDABindAuthenticatedAccount } from \"./util/UDABindAuthenticatedAccount\";\nimport { UDAStorageService } from \"./services/UDAStorageService\";\nimport { keyCloakStore } from \"./util/KeycloakStore\";\nlet sessionData = new UDASessionData();\n// listen for the requests made from webpage for accessing userdata\nbrowserVar.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (request.action === \"getusersessiondata\" || request.action === \"UDAGetNewToken\") {\n            const storedSessionData = yield UDAStorageService.get(UDASessionName);\n            if (!storedSessionData) {\n                sessionData = yield UDAGetSessionKey(sessionData);\n                yield LoginWithBrowser(sessionData, false);\n            }\n            else {\n                // looks like browser storage might have changed so changing the reading the data has been changed. For to work with old version have added the new code to else if statement\n                if (storedSessionData.hasOwnProperty(\"sessionKey\") && storedSessionData[\"sessionKey\"] && typeof storedSessionData[\"sessionKey\"] != 'object') {\n                    sessionData = storedSessionData;\n                    if (request.action === \"UDAGetNewToken\") {\n                        yield generateNewToken();\n                    }\n                    else if (storedSessionData.hasOwnProperty('authenticated') && storedSessionData.authenticated) {\n                        yield UDASendSessionData(sessionData);\n                    }\n                    else {\n                        yield LoginWithBrowser(sessionData, false);\n                    }\n                }\n                else if (storedSessionData.hasOwnProperty(UDASessionName) && storedSessionData[UDASessionName].hasOwnProperty(\"sessionKey\") && storedSessionData[UDASessionName][\"sessionKey\"] && typeof storedSessionData[UDASessionName][\"sessionKey\"] != 'object') {\n                    sessionData = storedSessionData[UDASessionName];\n                    if (storedSessionData.hasOwnProperty('authenticated') && storedSessionData.authenticated) {\n                        yield UDASendSessionData(sessionData);\n                    }\n                    else {\n                        yield LoginWithBrowser(sessionData, false);\n                    }\n                }\n                else {\n                    sessionData = yield UDAGetSessionKey(sessionData);\n                    yield LoginWithBrowser(sessionData, false);\n                }\n            }\n        }\n        else if (request.action === \"authtenicate\") {\n            yield LoginWithBrowser(sessionData, false);\n        }\n        else if (request.action === \"createSession\") {\n            yield keyCloakStore(sessionData, request.data);\n        }\n    });\n});\nfunction generateNewToken() {\n    return __awaiter(this, void 0, void 0, function* () {\n        console.log(sessionData);\n        yield UDABindAuthenticatedAccount(sessionData, true);\n    });\n}\n"],"names":[],"sourceRoot":""}