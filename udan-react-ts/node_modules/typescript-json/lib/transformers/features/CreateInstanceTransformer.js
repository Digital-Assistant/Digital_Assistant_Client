"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CreateInstanceTransformer = void 0;
var typescript_1 = __importDefault(require("typescript"));
var CreateInstanceTransformer;
(function (CreateInstanceTransformer) {
    function transform(_project, _modulo, expression) {
        var param = expression.arguments[0];
        if (param === undefined)
            throw new Error("Error on TSON.createObject(): no input value.");
        var json = to_json_string(param);
        return typescript_1.default.factory.createCallExpression(typescript_1.default.factory.createIdentifier("JSON.parse"), undefined, [typescript_1.default.factory.createStringLiteral(json)]);
    }
    CreateInstanceTransformer.transform = transform;
    function to_json_string(param) {
        try {
            var text = param.getFullText();
            var obj = new Function("return ".concat(text, ";"))();
            return JSON.stringify(obj);
        }
        catch (exp) {
            throw new Error("Error on TSON.createObject(): input value must be constant.");
        }
    }
})(CreateInstanceTransformer = exports.CreateInstanceTransformer || (exports.CreateInstanceTransformer = {}));
//# sourceMappingURL=CreateInstanceTransformer.js.map