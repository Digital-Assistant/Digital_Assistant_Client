"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileTransformer = void 0;
var typescript_1 = __importDefault(require("typescript"));
var NodeTransformer_1 = require("./NodeTransformer");
var FileTransformer;
(function (FileTransformer) {
    function transform(project, context, file) {
        if (file.isDeclarationFile)
            return file;
        return typescript_1.default.visitEachChild(file, function (node) { return iterate_node(project, context, node); }, context);
    }
    FileTransformer.transform = transform;
    function iterate_node(project, context, node) {
        return typescript_1.default.visitEachChild(try_transform_node(project, node), function (child) { return iterate_node(project, context, child); }, context);
    }
    function try_transform_node(project, node) {
        try {
            return NodeTransformer_1.NodeTransformer.transform(project, node);
        }
        catch (exp) {
            if (!(exp instanceof Error))
                throw exp;
            var file = node.getSourceFile();
            var _a = file.getLineAndCharacterOfPosition(node.pos), line = _a.line, character = _a.character;
            exp.message += " - ".concat(file.fileName, ".").concat(line + 1, ":").concat(character + 1);
            throw exp;
        }
    }
})(FileTransformer = exports.FileTransformer || (exports.FileTransformer = {}));
//# sourceMappingURL=FileTransformer.js.map